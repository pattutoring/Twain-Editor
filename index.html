<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Write Like Mark Twain</title>
<style>
body{font-family:"Courier New",monospace;background:#f5f2e8;color:#3b2f2f;padding:20px;line-height:1.6}
h1{font-family:Georgia,serif;text-align:center;color:#4b2e05}
#editorContainer{position:relative;margin:20px auto;width:90%;max-width:800px}
#editor{width:100%;min-height:220px;background:#fffaf3;border:2px solid #a68a64;
padding:10px 50px 10px 60px;resize:vertical;overflow-y:auto;white-space:pre-wrap;
font-size:16px;line-height:1.6;box-sizing:border-box;outline:none;caret-color:transparent}
.cursor{display:inline-block;width:10px;height:18px;background:#000;margin-left:2px;
animation:blink 1s steps(1) infinite;vertical-align:bottom}
@keyframes blink{50%{opacity:0}}
#lineNumbers{position:absolute;top:0;left:0;width:40px;background:#f0e6d2;color:#8b7355;
text-align:right;padding:10px 5px;font-size:16px;line-height:1.6;user-select:none;
border-right:1px solid #cbb79e}
.highlight-yellow{background:#fff59d}
.highlight-pink{background:#f8bbd0}
.highlight-green{background:#c8e6c9}
.highlight-blue{background:#bbdefb}
.highlight-orange{background:#ffe0b2}
.highlight-purple{background:#e1bee7}
.annotation{margin:8px 0;padding:8px;border-radius:8px;font-style:italic;max-width:80%}
.annotation.yellow{background:#fff59d}
.annotation.pink{background:#f8bbd0}
.annotation.green{background:#c8e6c9}
.annotation.blue{background:#bbdefb}
.annotation.orange{background:#ffe0b2}
.annotation.purple{background:#e1bee7}
#rulesList{margin-top:25px;background:#fffaf0;padding:10px;border-left:4px solid #a67b5b}
</style>
</head>
<body>
<h1>Write Like Mark Twain</h1>

<div id="editorContainer">
  <div id="lineNumbers"></div>
  <div id="editor" contenteditable="true" spellcheck="false"></div>
  <span class="cursor" id="cursor"></span>
</div>

<div id="annotations"></div>

<div id="rulesList">
  <h3>Twain’s Rules of Writing:</h3>
  <ul>
    <li>Never use a five-dollar word when a fifty-cent word will do.</li>
    <li>Use plain, simple language, short words, and brief sentences.</li>
    <li>Be cautious with adjectives — one is plenty.</li>
    <li>Substitute “damn” for “very.”</li>
    <li>The right word beats the almost right one like lightning beats a lightning-bug.</li>
    <li>Avoid alliteration always.</li>
    <li>Don’t end sentences with prepositions.</li>
    <li>Avoid clichés like the plague.</li>
    <li>Comparisons are as bad as clichés.</li>
    <li>Be specific — never generalize.</li>
    <li>Don’t be redundant; it muddies meaning.</li>
    <li>Who needs rhetorical questions?</li>
    <li>Exaggeration is a billion times worse than understatement.</li>
    <li>Simplicity is the soul of writing.</li>
  </ul>
</div>

<script>
const editor=document.getElementById("editor"),
      annotations=document.getElementById("annotations"),
      lineNumbers=document.getElementById("lineNumbers"),
      cursor=document.getElementById("cursor");

editor.textContent=localStorage.getItem("twainText")||"Write like Mark Twain...";

editor.addEventListener("input",()=>{
  localStorage.setItem("twainText",editor.textContent);
  analyze();
});
editor.addEventListener("scroll",()=>lineNumbers.scrollTop=editor.scrollTop);

function updateLines(){
  const lines=editor.textContent.split(/\n/).length;
  lineNumbers.innerHTML=Array.from({length:lines},(_,i)=>i+1).join("<br>");
}

function analyze(){
  const text=editor.textContent;
  updateLines();
  annotations.innerHTML="";
  const rules=[
    {re:/\bvery\b/gi,c:"pink",note:'“Replace ‘very’ with something stronger — or damn it altogether.”'},
    {re:/\b(incredibly|extremely|so much|awfully|tremendously|exaggerate\w*)\b/gi,c:"orange",note:'“Don’t stretch the truth till it snaps.”'},
    {re:/\butilize\b|\bcommence\b|\bendeavor\b|\bassist\b/gi,c:"yellow",note:'“Use plain speech, son. Start where you stand.”'},
    {re:/\blike the plague\b|\bold hat\b|\bneedless to say\b/gi,c:"purple",note:'“Avoid clichés —they creak worse than an old door.”'},
    {re:/\b(adjective\w*)\b/gi,c:"green",note:'“Too many adjectives spoil the broth.”'},
    {re:/\?\s*$/gm,c:"blue",note:'“Rhetorical questions? You already know the answer.”'},
    {re:/\b(in|on|at|by|for|with|about|from|of)\.$/gmi,c:"orange",note:'“Don’t end your sentence with a preposition!”'},
    {re:/\bfluff\w*|\bredundan\w*|\bwordy\b/gi,c:"purple",note:'“Trim the fluff — tight writing wins.”'},
    {re:/\bperhaps\b|\bmaybe\b|\bsomehow\b|\bsomewhere\b/gi,c:"blue",note:'“Be certain or be quiet.”'},
    {re:/\bsimple\b|\bsimplicity\b/gi,c:"yellow",note:'“Simplicity is the soul of writing.”'}
  ];
  let html=text;
  rules.forEach(r=>{
    if(r.re.test(text)){
      html=html.replace(r.re,m=>`<span class="highlight-${r.c}">${m}</span>`);
      const a=document.createElement("div");
      a.className=`annotation ${r.c}`;
      a.textContent="Twain says: "+r.note;
      annotations.appendChild(a);
    }
  });
  editor.innerHTML=html;
  placeCursor();
}

function placeCursor(){
  const range=document.createRange(),sel=window.getSelection();
  range.selectNodeContents(editor);
  range.collapse(false);
  sel.removeAllRanges();
  sel.addRange(range);
}

(function blink(){
  cursor.style.visibility=(cursor.style.visibility==="hidden")?"visible":"hidden";
  setTimeout(blink,600);
})();

analyze();
</script>
</body>
</html>
